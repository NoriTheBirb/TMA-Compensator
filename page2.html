<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="Style.css" />
    <title>TMA Compensator — Relatório</title>
</head>
<body>
    <div class="container report-container">
        <header class="report-header">
            <div>
                <h1 class="report-title">Relatório do dia</h1>
                <div class="report-sub">Resumo do dia + gráficos. Diferença = Gasto - TMA (0 é perfeito; negativo = abaixo do TMA; positivo = acima). Meta do dia: 17 contas. Saldo bom: perto de 00:00:00.</div>
            </div>
            <div class="report-actions">
                <a href="index.html" class="sidebar-action" style="text-decoration:none;">← Voltar</a>
                <button id="reportToggleThemeBtn" class="sidebar-action" type="button">Alternar tema</button>
                <label class="sidebar-action" style="cursor:pointer;">
                    Importar JSON
                    <input id="reportImportInput" type="file" accept="application/json,.json" style="display:none;" />
                </label>
                <button id="reportExportBtn" class="sidebar-action" type="button">Exportar JSON</button>
            </div>
        </header>

        <div id="reportDatasetHint" class="report-muted" style="margin: 0 0 10px;"></div>

        <section class="report-grid">
            <div class="report-card">
                <div class="report-k">Saldo</div>
                <div class="report-v" id="reportBalance">--</div>
                <div class="report-h">Acumulado de (Gasto - TMA). Bem = dentro de ±10 min (positivo ou negativo).</div>
            </div>
            <div class="report-card">
                <div class="report-k">Contas</div>
                <div class="report-v" id="reportTxCount">--</div>
                <div class="report-h">Transações registradas hoje.</div>
            </div>
            <div class="report-card">
                <div class="report-k">Média</div>
                <div class="report-v" id="reportAvgDiff">--</div>
                <div class="report-h">Média por conta (Gasto - TMA).</div>
            </div>
            <div class="report-card">
                <div class="report-k">Tempo gasto</div>
                <div class="report-v" id="reportTimeSpent">--</div>
                <div class="report-h">Soma do tempo informado.</div>
            </div>
            <div class="report-card">
                <div class="report-k">Pausados</div>
                <div class="report-v"><span id="reportPausedCount">--</span> <span class="report-v-sub">em fila</span></div>
                <div class="report-h">Total: <span id="reportPausedTotal">--</span></div>
            </div>

            <div class="report-card">
                <div class="report-k">Timer (Flow)</div>
                <div class="report-v" id="reportFlowTimer">--:--:--</div>
                <div class="report-h" id="reportFlowTimerMeta">Nenhum timer em andamento.</div>
            </div>
        </section>

        <section class="report-two">
            <div class="report-panel">
                <div class="report-panel-head">
                    <h2>Config</h2>
                </div>
                <div class="report-panel-body">
                    <div class="report-row">
                        <div class="report-row-main">
                            <div class="report-row-title">Tema</div>
                            <div class="report-row-sub">Salvo em localStorage</div>
                        </div>
                        <div class="report-row-right" id="reportTheme">--</div>
                    </div>
                    <div class="report-row">
                        <div class="report-row-main">
                            <div class="report-row-title">Complexas</div>
                            <div class="report-row-sub">Preferência do usuário</div>
                        </div>
                        <div class="report-row-right" id="reportComplexa">--</div>
                    </div>
                    <div class="report-row">
                        <div class="report-row-main">
                            <div class="report-row-title">Turno</div>
                            <div class="report-row-sub">Início configurado</div>
                        </div>
                        <div class="report-row-right" id="reportShift">--</div>
                    </div>
                    <div class="report-row">
                        <div class="report-row-main">
                            <div class="report-row-title">Almoço</div>
                            <div class="report-row-sub">Janela salva</div>
                        </div>
                        <div class="report-row-right" id="reportLunch">--</div>
                    </div>
                </div>
            </div>

            <div class="report-panel">
                <div class="report-panel-head">
                    <h2>Insights</h2>
                </div>
                <div class="report-panel-body" id="reportTopItems"></div>
            </div>
        </section>

        <section class="report-two" style="margin-top: 12px;">
            <div class="report-panel">
                <div class="report-panel-head">
                    <h2>Gráfico — saldo ao longo do tempo</h2>
                </div>
                <div class="report-panel-body">
                    <canvas id="reportChartBalance" class="report-chart" width="900" height="260" aria-label="Gráfico de saldo acumulado" role="img"></canvas>
                    <div class="report-h" style="margin-top:10px;">Linha do acumulado (Gasto - TMA) na ordem que você registrou.</div>
                </div>
            </div>

            <div class="report-panel">
                <div class="report-panel-head">
                    <h2>Gráfico — distribuição da diferença</h2>
                </div>
                <div class="report-panel-body">
                    <canvas id="reportChartDiffs" class="report-chart" width="900" height="260" aria-label="Gráfico de distribuição das diferenças" role="img"></canvas>
                    <div class="report-h" style="margin-top:10px;">Barras por faixa. Esquerda (verde) = abaixo do TMA. Direita (vermelho) = acima.</div>
                </div>
            </div>
        </section>

        <section class="report-two" style="margin-top: 12px;">
            <div class="report-panel">
                <div class="report-panel-head">
                    <h2>Sugestões</h2>
                </div>
                <div class="report-panel-body" id="reportSuggestions"></div>
            </div>

            <div class="report-panel">
                <div class="report-panel-head">
                    <h2>Estatísticas divertidas</h2>
                </div>
                <div class="report-panel-body" id="reportFunStats"></div>
            </div>
        </section>

        <section class="report-two" style="margin-top: 12px;">
            <div class="report-panel">
                <div class="report-panel-head">
                    <h2>Mini awards</h2>
                </div>
                <div class="report-panel-body" id="reportAwards"></div>
            </div>

            <div class="report-panel">
                <div class="report-panel-head">
                    <h2>Momento do dia</h2>
                </div>
                <div class="report-panel-body" id="reportDayparts"></div>
            </div>
        </section>

        <section class="report-panel" style="margin-top: 16px;">
            <div class="report-panel-head">
                <h2>Últimas contas</h2>
            </div>
            <div class="report-panel-body" id="reportRecentTx"></div>
        </section>

        <section class="report-panel" style="margin-top: 16px;">
            <div class="report-panel-head">
                <h2>Contas pausadas</h2>
            </div>
            <div class="report-panel-body" id="reportPausedList"></div>
            <div class="report-panel-foot">
                Gerencie pausados na página principal.
                <a href="index.html" style="color: var(--accent); text-decoration:none; font-weight:800;">Abrir app</a>
            </div>
        </section>
    </div>

    <script src="ScriptPage2.js"></script>

    <div id="reportModalOverlay" class="report-modal-overlay is-hidden" role="dialog" aria-modal="true" aria-labelledby="reportModalTitle">
        <div class="report-modal" role="document">
            <div class="report-modal-head">
                <div>
                    <div id="reportModalTitle" class="report-modal-title">Detalhes</div>
                    <div class="report-modal-sub">Explicação rápida do indicador.</div>
                </div>
                <button id="reportModalClose" class="report-modal-close" type="button" aria-label="Fechar">×</button>
            </div>
            <div id="reportModalBody" class="report-modal-body"></div>
        </div>
    </div>
</body>
</html>
