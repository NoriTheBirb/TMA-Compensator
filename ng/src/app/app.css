
.companion {
	--companion-size: 270px;
	--companion-gap: 14px;
	position: fixed;
	right: 18px;
	bottom: 18px;
	z-index: 9998;
}

.companion.is-hidden {
	display: none;
}

.companion-square {
	width: var(--companion-size);
	height: var(--companion-size);
	position: relative;
	border: none;
	background: transparent;
	box-shadow: none;
	border-radius: 0;
	cursor: pointer;
	padding: 0;
	overflow: visible;
}

.companion-badge {
	position: absolute;
	top: 10px;
	right: 14px;
	min-width: 22px;
	height: 22px;
	padding: 0 6px;
	border-radius: 999px;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	font-weight: 980;
	font-size: 12px;
	letter-spacing: -0.2px;
	color: white;
	background: #e02424;
	box-shadow: 0 10px 30px rgba(224,36,36,0.25);
	border: 1px solid rgba(255,255,255,0.25);
}

.companion-square:hover {
	transform: translateY(-1px);
}

.companion-img {
	width: 100%;
	height: 100%;
	object-fit: contain;
	display: block;
	background: transparent;
	transform: scaleX(-1);
	filter: drop-shadow(0 18px 55px rgba(0,0,0,0.28));
}

.companion-bubble {
	position: absolute;
	right: 0;
	bottom: calc(var(--companion-size) + var(--companion-gap));
	width: min(380px, calc(100vw - 36px));
	max-height: calc(100vh - (var(--companion-size) + var(--companion-gap) + 36px));
	overflow: auto;
	border-radius: 16px;
	padding: 12px;
	background: color-mix(in oklab, var(--card) 96%, var(--surface));
	border: 1px solid color-mix(in oklab, var(--border, rgba(255,255,255,0.15)) 45%, transparent);
	box-shadow: 0 28px 90px rgba(0,0,0,0.30);
	opacity: 0;
	transform: translateY(6px);
	pointer-events: none;
	transition: opacity 160ms ease, transform 160ms ease;
}

.companion-bubble.is-open {
	opacity: 1;
	transform: translateY(0);
	pointer-events: auto;
}

.companion-bubble-head {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 10px;
}

.companion-title {
	font-weight: 980;
	letter-spacing: -0.2px;
}

.companion-close {
	width: 34px;
	height: 34px;
	border-radius: 12px;
	border: 1px solid color-mix(in oklab, var(--border, rgba(255,255,255,0.15)) 45%, transparent);
	background: color-mix(in oklab, var(--surface) 70%, transparent);
	color: inherit;
	cursor: pointer;
	font-weight: 950;
}

.companion-body {
	margin-top: 8px;
	color: var(--muted);
	font-weight: 850;
	line-height: 1.25;
}

.companion-actions {
	margin-top: 10px;
	display: flex;
	justify-content: flex-end;
}

.companion-action {
	border: 1px solid color-mix(in oklab, var(--border, rgba(255,255,255,0.15)) 45%, transparent);
	background: color-mix(in oklab, var(--surface) 70%, transparent);
	color: inherit;
	border-radius: 12px;
	padding: 8px 10px;
	font-weight: 950;
	cursor: pointer;
}

@media (max-width: 520px), (max-height: 740px) {
	.companion {
		--companion-size: 210px;
		--companion-gap: 12px;
		right: 12px;
		bottom: 12px;
	}
}

@media (max-width: 380px), (max-height: 620px) {
	.companion {
		--companion-size: 170px;
		--companion-gap: 10px;
		right: 10px;
		bottom: 10px;
	}

	.companion-bubble {
		width: min(340px, calc(100vw - 20px));
	}
}
